---
import Layout from '../../layouts/Layout.astro';
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import { marked } from 'marked';

const { slug } = Astro.params;
const filePath = path.join(Astro.srcDir, '../../content/blog', `${slug}.md`);
const file = fs.readFileSync(filePath, 'utf-8');
const { data, content } = matter(file);
const html = marked(content);
---

<Layout>
  <article class="prose lg:prose-xl mx-auto py-12">
    <h1>{data.title}</h1>
    <p><small>{data.date} Â· {data.author}</small></p>
    <img src={data.image} alt={data.title} />
    <div set:html={html}></div>
  </article>
</Layout>
